!function(){function e(e){return document.getElementById(e)}function t(t,a){function n(e,t){e.style.transform="rotate("+t+"deg)",e.style.WebkitTransform="rotate("+t+"deg)",e.style.msTransform="rotate("+t+"deg)",e.style.MozTransform="rotate("+t+"deg)",e.style.OTransform="rotate("+t+"deg)"}a=a||8,e("maxT").innerHTML=a;for(var i=document.body.offsetWidth-45,r=100,o=6,l=Math.floor((i-25)/(t.length-1))-o,s=1;s<t.length;s++){var d=t[s-1].time/a*r,c=t[s].time/a*r,m=document.createElement("div");m.className="line-wrap",m.style.width=l+"px",m.style.height=r+2+"px",m.style.left=5+(l+o)*(s-1)+o/2+"px";var p=document.createElement("div");p.className="line",m.appendChild(p);var h=(d+c)/2;p.style.bottom=h+"px";var u=1e3;p.style.width=u+"px",p.style.marginLeft=(l-u)/2+"px",n(p,180*Math.atan(1*(d-c)/(l+o))/Math.PI),e("map").appendChild(m)}for(var s=0;s<t.length;s++){var g=document.createElement("div");g.className="dot",g.style.left=5+(l+o)*s+"px",g.style.bottom=Math.floor(t[s].time/a*r)+"px",e("map").appendChild(g);var f=document.createElement("div");f.innerText=s?t[s].date.replace(/(.*月)|日/g,"").replace(/^0/,""):t[s].date,f.className=s!=t.length-1?"text":"text-2 text",f.style.left=(s?2:0)+(l+o)*s+"px",e("map").appendChild(f)}var y=document.createElement("div");y.innerText="0",y.className="ytitle",e("map").appendChild(y);var v=document.createElement("div");v.className="xline",e("map").appendChild(v)}function a(){function t(){e("container").style.display="none",e("less-data").style.display="block";var t=e("less-data").querySelector("img");t.src="img/less-data.jpg";var n=Math.min(document.body.offsetWidth,375)*a.height/a.width;t.style.top=.45*(document.body.offsetHeight-n)+"px"}var a=new Image;a.src="img/less-data.jpg",a.complete?t():a.onload=t}function n(n){for(var i=1,r=0;r<n.list.length;r++)i=Math.ceil(Math.min(8,Math.max(i,n.list[r].time+1)));if(n.total_read_book<5)return void a();var o=!/referer/i.test(window.location.search),l=/linux|android/i.test(navigator.userAgent),s=/referer=3/i.test(window.location.search);if(e("user_block").style.display=o?"block":"none",o&&window.DlImRead&&DlImRead(),e("share-btn").style.display=o||s?"none":"block",e("container").className=o&&l?"download":"",t(n.list.reverse(),i),e("avatar").innerHTML=n.user.avatar,e("nickname").innerHTML=n.user.nickname,e("achieve").innerHTML=n.user.achieve,e("total_read_book").innerHTML=n.total_read_book,e("total_read_time").innerHTML=n.total_read_time,e("today_read_time").innerHTML=n.today_read_time.replace("天","<i>天</i>").replace("时","<i>时</i>").replace("分","<i>分</i>").replace("秒","<i>秒</i>"),e("continuous_reading_time").innerHTML=n.continuous_reading_time,e("tags").innerHTML="",n.tags.length)for(var r=0;r<n.tags.length;r++){var d=document.createElement("div");d.className="tag",d.innerHTML=n.tags[r],e("tags").appendChild(d)}else e("tags").innerHTML='<span class="no-tag-tip">你还没有设置标签哦</span>';var c={title:document.title,description:"我已读过"+n.total_read_book+"本，阅读时间总计"+n.total_read_time,avatar:"http://www.imread.com/img/thumb.jpg"};l&&window.IMreadClient&&window.IMreadClient.getData(JSON.stringify(c)),e("share-btn").onclick=function(){l?window.IMreadClient.share(JSON.stringify(c)):share(c)},setTimeout(function(){e("loading").style.display="none",e("container").style.display="block"},0)}function i(){e("no-data").style.display="block"}function r(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState)if(200==e.status){var t=JSON.parse(e.responseText);200==t.code?n(t.success):i()}else i()};var t=window.location.search.match(/user_id=(\d+)/),a=t&&t[1];e.open("GET","http://readapi.imread.com/api/me/experience?user_id="+a),e.send(null)}window.onload=function(){r()}}();